async function groupCardSearch() {
  const input = document.getElementById('groupCardInput').value;
  const cardNames = input.split('\n').map(name => name.trim()).filter(name => name !== '');
  const display = document.getElementById('cardDisplay');
  display.innerHTML = '';

  if (cardNames.length === 0) {
    alert('Please enter at least one card name.');
    return;
  }

  // Break into batches of 75 (Scryfall limit)
  const batchSize = 75;
  for (let i = 0; i < cardNames.length; i += batchSize) {
    const batch = cardNames.slice(i, i + batchSize);
    const identifiers = batch.map(name => ({ name }));

    try {
      const response = await fetch('https://api.scryfall.com/cards/collection', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifiers })
      });

      const data = await response.json();
      if (data.data) {
        data.data.forEach(card => {
          if (card.image_uris) {
            const img = document.createElement('img');
            img.src = card.image_uris.normal;
            img.alt = card.name;
            display.appendChild(img);
          } else if (card.card_faces) {
            card.card_faces.forEach(face => {
              const img = document.createElement('img');
              img.src = face.image_uris.normal;
              img.alt = face.name;
              display.appendChild(img);
            });
          }
        });
      }

      // Show any cards that were not found
      if (data.not_found && data.not_found.length > 0) {
        data.not_found.forEach(missing => {
          const p = document.createElement('p');
          p.textContent = `Card not found: ${missing.name}`;
          display.appendChild(p);
        });
      }

    } catch (err) {
      const p = document.createElement('p');
      p.textContent = 'Error loading cards.';
      display.appendChild(p);
    }
  }
}
